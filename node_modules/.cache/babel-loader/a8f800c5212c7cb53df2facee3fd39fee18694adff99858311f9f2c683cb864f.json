{"ast":null,"code":"/*! @azure/msal-common v15.7.0 2025-05-30 */\n'use strict';\n\nimport { Authority, formatAuthorityUri } from './Authority.mjs';\nimport { createClientAuthError } from '../error/ClientAuthError.mjs';\nimport { PerformanceEvents } from '../telemetry/performance/PerformanceEvent.mjs';\nimport { invokeAsync } from '../utils/FunctionWrappers.mjs';\nimport { endpointResolutionError } from '../error/ClientAuthErrorCodes.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n/**\r\n * Create an authority object of the correct type based on the url\r\n * Performs basic authority validation - checks to see if the authority is of a valid type (i.e. aad, b2c, adfs)\r\n *\r\n * Also performs endpoint discovery.\r\n *\r\n * @param authorityUri\r\n * @param networkClient\r\n * @param protocolMode\r\n * @internal\r\n */\nasync function createDiscoveredInstance(authorityUri, networkClient, cacheManager, authorityOptions, logger, correlationId, performanceClient) {\n  performanceClient?.addQueueMeasurement(PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance, correlationId);\n  const authorityUriFinal = Authority.transformCIAMAuthority(formatAuthorityUri(authorityUri));\n  // Initialize authority and perform discovery endpoint check.\n  const acquireTokenAuthority = new Authority(authorityUriFinal, networkClient, cacheManager, authorityOptions, logger, correlationId, performanceClient);\n  try {\n    await invokeAsync(acquireTokenAuthority.resolveEndpointsAsync.bind(acquireTokenAuthority), PerformanceEvents.AuthorityResolveEndpointsAsync, logger, performanceClient, correlationId)();\n    return acquireTokenAuthority;\n  } catch (e) {\n    throw createClientAuthError(endpointResolutionError);\n  }\n}\nexport { createDiscoveredInstance };","map":{"version":3,"names":["createDiscoveredInstance","authorityUri","networkClient","cacheManager","authorityOptions","logger","correlationId","performanceClient","addQueueMeasurement","PerformanceEvents","AuthorityFactoryCreateDiscoveredInstance","authorityUriFinal","Authority","transformCIAMAuthority","formatAuthorityUri","acquireTokenAuthority","invokeAsync","resolveEndpointsAsync","bind","AuthorityResolveEndpointsAsync","e","createClientAuthError","endpointResolutionError"],"sources":["/Users/yuri.narang/Desktop/bondly-workplace-community-hub/node_modules/@azure/msal-common/src/authority/AuthorityFactory.ts"],"sourcesContent":["/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Authority, formatAuthorityUri } from \"./Authority.js\";\nimport { INetworkModule } from \"../network/INetworkModule.js\";\nimport {\n    createClientAuthError,\n    ClientAuthErrorCodes,\n} from \"../error/ClientAuthError.js\";\nimport { ICacheManager } from \"../cache/interface/ICacheManager.js\";\nimport { AuthorityOptions } from \"./AuthorityOptions.js\";\nimport { Logger } from \"../logger/Logger.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport { PerformanceEvents } from \"../telemetry/performance/PerformanceEvent.js\";\nimport { invokeAsync } from \"../utils/FunctionWrappers.js\";\n\n/**\n * Create an authority object of the correct type based on the url\n * Performs basic authority validation - checks to see if the authority is of a valid type (i.e. aad, b2c, adfs)\n *\n * Also performs endpoint discovery.\n *\n * @param authorityUri\n * @param networkClient\n * @param protocolMode\n * @internal\n */\nexport async function createDiscoveredInstance(\n    authorityUri: string,\n    networkClient: INetworkModule,\n    cacheManager: ICacheManager,\n    authorityOptions: AuthorityOptions,\n    logger: Logger,\n    correlationId: string,\n    performanceClient?: IPerformanceClient\n): Promise<Authority> {\n    performanceClient?.addQueueMeasurement(\n        PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,\n        correlationId\n    );\n    const authorityUriFinal = Authority.transformCIAMAuthority(\n        formatAuthorityUri(authorityUri)\n    );\n\n    // Initialize authority and perform discovery endpoint check.\n    const acquireTokenAuthority: Authority = new Authority(\n        authorityUriFinal,\n        networkClient,\n        cacheManager,\n        authorityOptions,\n        logger,\n        correlationId,\n        performanceClient\n    );\n\n    try {\n        await invokeAsync(\n            acquireTokenAuthority.resolveEndpointsAsync.bind(\n                acquireTokenAuthority\n            ),\n            PerformanceEvents.AuthorityResolveEndpointsAsync,\n            logger,\n            performanceClient,\n            correlationId\n        )();\n        return acquireTokenAuthority;\n    } catch (e) {\n        throw createClientAuthError(\n            ClientAuthErrorCodes.endpointResolutionError\n        );\n    }\n}\n"],"mappings":";;;;;;;;;AAAA;;;AAGG;AAeH;;;;;;;;;;AAUG;AACI,eAAeA,wBAAwBA,CAC1CC,YAAoB,EACpBC,aAA6B,EAC7BC,YAA2B,EAC3BC,gBAAkC,EAClCC,MAAc,EACdC,aAAqB,EACrBC,iBAAsC;EAEtCA,iBAAiB,EAAEC,mBAAmB,CAClCC,iBAAiB,CAACC,wCAAwC,EAC1DJ,aAAa,CAChB;EACD,MAAMK,iBAAiB,GAAGC,SAAS,CAACC,sBAAsB,CACtDC,kBAAkB,CAACb,YAAY,CAAC,CACnC;;EAGD,MAAMc,qBAAqB,GAAc,IAAIH,SAAS,CAClDD,iBAAiB,EACjBT,aAAa,EACbC,YAAY,EACZC,gBAAgB,EAChBC,MAAM,EACNC,aAAa,EACbC,iBAAiB,CACpB;EAED,IAAI;IACA,MAAMS,WAAW,CACbD,qBAAqB,CAACE,qBAAqB,CAACC,IAAI,CAC5CH,qBAAqB,CACxB,EACDN,iBAAiB,CAACU,8BAA8B,EAChDd,MAAM,EACNE,iBAAiB,EACjBD,aAAa,CAChB,EAAE;IACH,OAAOS,qBAAqB;EAC/B,EAAC,OAAOK,CAAC,EAAE;IACR,MAAMC,qBAAqB,CACvBC,uBAA4C,CAC/C;EACJ;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}